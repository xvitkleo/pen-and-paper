(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-98b32390"],{"072f":function(t,e,n){t.exports=n.p+"img/screenEmptyState.9fbd2108.svg"},2645:function(t,e,n){},"474b":function(t,e,n){"use strict";n("aad4")},"933f":function(t,e,n){"use strict";var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.to?n("router-link",{staticClass:"btn",class:t.btnVariant,attrs:{to:t.to}},[t._t("default")],2):t.href?n("a",{staticClass:"btn",class:t.btnVariant,attrs:{href:t.href,target:"_blank",rel:"noopener noreferrer"}},[t._t("default")],2):n("button",{staticClass:"btn",class:t.btnVariant,attrs:{type:t.type,disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}},[t._t("default")],2)},i=[],c={name:"CustomButton",props:{to:String,href:String,variant:String,type:String,disabled:Boolean},computed:{btnVariant:function(){switch(this.variant){case"text":return"btn__text";case"text2":return"btn__text2";case"text2-danger":return"btn__text2--danger";case"danger":return"btn__danger";default:return"btn__primary"}}}},s=c,a=(n("474b"),n("2877")),o=Object(a["a"])(s,r,i,!1,null,"7abc24b2",null);e["a"]=o.exports},a15b:function(t,e,n){"use strict";var r=n("23e7"),i=n("44ad"),c=n("fc6a"),s=n("a640"),a=[].join,o=i!=Object,u=s("join",",");r({target:"Array",proto:!0,forced:o||!u},{join:function(t){return a.call(c(this),void 0===t?",":t)}})},aad4:function(t,e,n){},ae9d:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"shareScreen__container"},[t._m(0),r("div",{staticClass:"shareScreen__body"},[r("div",{staticClass:"shareScreen__screen"},[t.room.sharingId===t.userProfile.id?r("div",{ref:"screen__container",staticClass:"screen__container"}):t.sharingScreen?r("div",{ref:"screen__container",staticClass:"screen__container"},[t.watching?t._e():r("img",{staticClass:"emptyState__img",attrs:{src:n("c886"),alt:""}})]):r("div",{staticClass:"screen__emptyState"},[r("img",{staticClass:"emptyState__img",attrs:{src:n("072f"),alt:""}}),r("div",{staticClass:"hide"},[t._v(t._s(t.watching=!1))])])]),r("div",{staticClass:"shareScreen__tools"},[t.room.sharingId===t.userProfile.id?r("custom-button",{attrs:{variant:"danger"},on:{click:t.stopSharing}},[t._v("Stop")]):t.sharingScreen?r("custom-button",{on:{click:t.seeSharingScreen}},[t._v("Join")]):r("custom-button",{on:{click:t.shareScreen}},[t._v("Share")])],1)])])},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"shareScreen__tittle"},[n("div",[n("h4",[t._v("Pantalla Compartida")])])])}],c=n("1da1"),s=n("5530"),a=(n("a15b"),n("159b"),n("96cf"),n("2f62")),o=n("933f"),u={name:"ShareScreen",components:{CustomButton:o["a"]},data:function(){return{searchField:"",isMenuOpen:!1,name:"",theme:"",length:"",connection:null,watching:!1}},methods:Object(s["a"])(Object(s["a"])({},Object(a["c"])(["setAlert"])),{},{connectionInit:function(){var t=this;this.connection=new window.RTCMultiConnection,this.connection.socketURL="https://rtcmulticonnection.herokuapp.com:443/",this.connection.session={screen:!0,oneway:!0},this.connection.sdpConstraints.mandatory={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0},this.connection.onstream=function(e){t.$refs.screen__container.appendChild(e.mediaElement),t.$refs.screen__container.children[0].style.height="100%"}},shareScreen:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$store.dispatch("fetchRooms");case 2:t.sharingScreen||(t.$store.dispatch("shareScreen"),t.connectionInit(),t.connection.open(t.room.id));case 3:case"end":return e.stop()}}),e)})))()},seeSharingScreen:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.watching?t.setAlert({state:"error",message:"Ya esta viendo"}):(t.watching=!0,t.connectionInit(),t.connection.sdpConstraints.mandatory={OfferToReceiveAudio:!1,OfferToReceiveVideo:!0},t.connection.join(t.room.id));case 1:case"end":return e.stop()}}),e)})))()},stopSharing:function(){var t=this;this.sharingScreen&&this.$store.dispatch("stopSharing"),this.connection&&(this.connection.getAllParticipants().forEach((function(e){t.connection.disconnectWith(e)})),this.connection.attachStreams.forEach((function(t){t.stop()})),this.connection.closeSocket())}}),mounted:function(){var t=document.createElement("script");t.setAttribute("src","https://rtcmulticonnection.herokuapp.com/dist/RTCMultiConnection.min.js"),document.head.appendChild(t);var e=document.createElement("script");e.setAttribute("src","https://rtcmulticonnection.herokuapp.com/socket.io/socket.io.js"),document.head.appendChild(e)},beforeDestroy:function(){this.room.sharingId===this.userProfile.id&&this.stopSharing()},computed:Object(s["a"])({},Object(a["d"])(["userProfile","rooms","room","files","sharingScreen"]))},h=u,d=(n("c99b"),n("2877")),l=Object(d["a"])(h,r,i,!1,null,"0072c4dd",null);e["default"]=l.exports},c886:function(t,e,n){t.exports=n.p+"img/joinScreenEmptyState.9f3266eb.svg"},c99b:function(t,e,n){"use strict";n("2645")}}]);
//# sourceMappingURL=chunk-98b32390.d6ccc611.js.map